---
#Use Custom CSS File
features: 
  css: ACSA1_S2.css
  debug: True
  hided standard menu: True
---
include:
  - ACSA1_S2_email_final.yml
---
#AnglicareSA App main
metadata:
  title: AnglicareSA Appointments Reminder System
  short title: AnglicareSA Appointments
  title url: https://anglicaresa.com.au/?gclid=CjwKCAjws8yUBhA1EiwAi_tpESD_JNhia_bB4fekMp0UDXQ3mxZzqJLO61FEgr_Ao6hdJ4F9zpOguxoCel8QAvD_BwE
  description: |
    Please use this App to send booking reminders to the client's registered email address.
---
objects:
  - user: Individual
  - RP: Individual
  - NRP: Individual
  - RP_appt1: Thing
  - RP_appt2: Thing
  - RP_appt3: Thing
  - RP_appt4: Thing
  - RP_appt5: Thing
  - RP_appt6: Thing
  - NRP_appt1: Thing
  - NRP_appt2: Thing
  - NRP_appt3: Thing
  - NRP_appt4: Thing
  - NRP_appt5: Thing
  - NRP_appt6: Thing
  - ACSAlogo: DAStaticFile.using(filename='Anglicare_logo.png')
---
default screen parts:
  post: |
    <div style="display: flex; height: 200px; align-items: center; flex-direction: column; justify-content: flex-end; flex-wrap: nowrap;">
    <div style="margin: 5px"><img src="https://staff.flinders.edu.au/etc.clientlibs/flinders/clientlibs/clientlib-site/resources/images/flinderuni_main_logo_black.png" height="40"> </div>
    <div style="margin: 5px; text-align: center; color: rgb(0,50,110)">
    <cite><small><i>
    Developed by Flinders University in<br>collaboration with AnglicareSA    <br>________________________________________________ </i></small></cite></div>
---
mandatory: True
code: |
  set_parts(logo='<img src="' + ACSAlogo.url_for() + '" style="height: 30px;">')
---
sections:
  - Welcome
  - Client Information
  - First Appointment
  - Follow Up Appointments
  - Email Reminders
  - PDFs Download
---
features:
  navigation: horizontal
  progress bar: True
---
mandatory: true
code: |
  ACdisplay_Welcome_screen
  user.name.first
  ACdisplay_Confirm_client
  ACdisplay_Confirm_first_appt
  ACdisplay_Confirm_follow_appt
  ACdisplay_email_reminders
  
  if email_sent_RP1 and email_sent_RP2 and email_sent_RP3 and email_sent_RP4 and email_sent_RP5 and email_sent_RP6 and email_sent_NRP1 and email_sent_NRP2 and email_sent_NRP3 and email_sent_NRP4 and email_sent_NRP5 and email_sent_NRP6:
    if RP_appt1.location == 'Noarlunga':
      instructions_to_RP_Noarlunga
      instructions_to_NRP_Noarlunga
      PDF_Noarlunga
    else: 
      instructions_to_RP_Mt_Barker
      instructions_to_NRP_Mt_Barker
      PDF_Mt_Barker
---
code: |
  ACdisplay_Welcome_screen = True
  force_ask('Welcome_screen')
---
event: Welcome_screen
question: ANGLICARESA CLIENT APPOINTMENT REMINDER SYSTEM 
subquestion: |

  Welcome to the AnglicareSA CCS appointment reminder system. 

  This application requires you to input client information (including email address, first and last name) and the dates and time for each appointment. 
  
  *Privacy Statement*
  
  Privacy is paramount when handling client information. It is vital that the application does not share personal matter between clients. 
  
  I understand that I have to follow Australian Privacy Principle 6.1, limiting the disclosure of personal information to the primary use intended, defining confidentiality and keeping of client information. 
  
  I understand I am bound by s 6A of the *Privacy Act*, to act in accordance with Australian Privacy Principles. 
under: |
  *Privacy Act 1988* (Cth) ss 6A, 14. 

buttons:
  - I agree: continue
  - I disagree: exit
    url: https://anglicaresa.com.au/?gclid=CjwKCAjws8yUBhA1EiwAi_tpEQ7MtgVdLRuNVg3MLaVwPr6WVv122naLlS5JkVmrANJ51-zq1778mRoCEnAQAvD_BwE
section: Welcome
---
mandatory: true
question: |
  Your AnglicareSA Details
fields:
  - First Name: user.name.first
  - Last Name: user.name.last
  - Email: user.email
    datatype: email
progress: 5
---
question: Case Number
fields:
  - no label: RP.case
section: Client Information
progress: 10
---
question: Number of Children Attending
fields:
  - no label: ACnoofchild
    datatype: integer
progress: 15
---    
question: Client Information 
fields:
  - note: For **RP**
    help: |
      Details for Responsible Parent
  - Title: RP.title
    datatype: dropdown
    choices: 
    - Mr
    - Ms
    - Mrs
    - Miss
  - Last Name: RP.name.last
  - First Name: RP.name.first
  - Email: RP.email
    datatype: email
  - Mobile Phone Number: RP.phone
    minlength: 12
    maxlength: 12
    default: '+61'
 
  - note: For **NRP**
    help: |
      Details for Non-Responsible Parent
  - Title: NRP.title
    datatype: dropdown
    choices: 
    - Mr
    - Ms
    - Mrs
    - Miss
  - Last Name: NRP.name.last
  - First Name: NRP.name.first
  - Email: NRP.email
    datatype: email
  - Mobile Phone Number: NRP.phone
    minlength: 12
    maxlength: 12
    default: '+61'
progress: 20
---
code: |
  ACdisplay_Confirm_client = True
  force_ask('Confirm_client')
---
event: Confirm_client
question: Confirm RP/NRP Information
subquestion: |
 
  **Case: ${RP.case}** 
  
  **Number of Children: ${ACnoofchild}**
  
  **RP Information**
  
  ${RP.name.first} ${RP.name.last}|Details
  ---|---
  Email|${RP.email}
  Mobile Phone|${RP.phone}
  
    **NRP Information**
  
  ${NRP.name.first} ${NRP.name.last}|Details
  ---|---
  Email|${NRP.email}
  Mobile Phone|${NRP.phone}
  
  **Please confirm the above client information**
  
buttons: 
  Confirm: continue
back button: true 
back button label: |
  Edit Client's Information
progress: 30
---
## Double check the date and time fields
question: | 
  First Appointment Details for RP
fields:
  - Location: RP_appt1.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga 
  - note: For **First Appointment**
  - RP Start Date: RP_appt1.begindate
    datatype: date
  - RP End Date: RP_appt1.enddate
    datatype: date
  - RP Arrival Time: RP_appt1.begintime
    datatype: time
  - RP Pick-up Time: RP_appt1.endtime
    datatype: time
  - Additional Info for RP: RP_appt1.description
    required: False 
section: First Appointment
progress: 40
---
## Double check the date and time fields
question: | 
  First Appointment Details for NRP
fields:
  - Location: NRP_appt1.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ RP_appt1.location }
  - note: For **First Appointment**
  - NRP Start Date: NRP_appt1.begindate
    datatype: date
    default: |
      ${ RP_appt1.begindate }
  - NRP End Date: NRP_appt1.enddate
    datatype: date
    default: |
      ${ RP_appt1.enddate }
  - NRP Arrival Time: NRP_appt1.begintime
    datatype: time
  - NRP Departure Time: NRP_appt1.endtime
    datatype: time
  - Additional Info for NRP: NRP_appt1.description
    required: False 
progress: 50
---
code: |
  ACdisplay_Confirm_first_appt = True
  force_ask('Confirm_first_appt')
---
event: Confirm_first_appt
question: Confirm First Appointment Details
subquestion: |
  
  **For RP**
  
  First Appointment|Details
  ---|---
  Location|${RP_appt1.location} RP
  Date|${ format_date(RP_appt1.begindate, format='full')}
  RP Arrival Time|${ format_time(RP_appt1.begintime, format='h:mm a')}
  RP Pick-up Time|${ format_time(RP_appt1.endtime, format='h:mm a')}
  Description|${RP_appt1.description}
  
  **For NRP**
  
  First Appointent|Details
  ---|---
  Location|${NRP_appt1.location} NRP
  Date|${ format_date(NRP_appt1.begindate, format='full')}
  NRP Arrival Time|${ format_time(NRP_appt1.begintime, format='h:mm a')}
  NRP Departure Time|${ format_time(NRP_appt1.endtime, format='h:mm a')}
  Description|${NRP_appt1.description}
  
  Please confirm the above appointment details.

buttons: 
  Confirm: continue
back button: True
back button label: |
  Edit First Appointment Date/Time  
progress: 60
---
question: Follow Up Appointments for RP
subquestion: |
  Please ensure the below appointmnet details are correct. 
fields:
  - note: For **Second Appointment** 
  - Start Date: RP_appt2.begindate
    datatype: date
    default: |
      ${ RP_appt1.begindate.plus(weeks=2) }
  - End Date: RP_appt2.enddate
    datatype: date
    default: |
      ${ RP_appt1.enddate.plus(weeks=2) }
  - RP Arrival Time: RP_appt2.begintime
    datatype: time
    default: |
      ${ RP_appt1.begintime }
  - RP Pick-up Time: RP_appt2.endtime
    datatype: time
    default: |
      ${ RP_appt1.endtime }
  - Location: RP_appt2.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ RP_appt1.location }      
  - Additional Info for RP: RP_appt2.description
    required: False
      
  - note: For **Third Appointment** 
  - Start Date: RP_appt3.begindate
    datatype: date
    default: |
      ${ RP_appt1.begindate.plus(weeks=4) }
  - End Date: RP_appt3.enddate
    datatype: date
    default: |
      ${ RP_appt1.enddate.plus(weeks=4) }
  - RP Arrival Time: RP_appt3.begintime
    datatype: time
    default: |
      ${ RP_appt1.begintime }
  - RP Pick-up Time: RP_appt3.endtime
    datatype: time
    default: |
      ${ RP_appt1.endtime }
  - Location: RP_appt3.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ RP_appt1.location }      
  - Additional Info for RP: RP_appt3.description 
    required: False
      
  - note: For **Fourth Appointment** 
  - Start Date: RP_appt4.begindate
    datatype: date
    default: |
      ${ RP_appt1.begindate.plus(weeks=6) }
  - End Date: RP_appt4.enddate
    datatype: date
    default: |
      ${ RP_appt1.enddate.plus(weeks=6) }
  - RP Arrival Time: RP_appt4.begintime
    datatype: time
    default: |
      ${ RP_appt1.begintime }
  - RP Pick-up Time: RP_appt4.endtime
    datatype: time
    default: |
      ${ RP_appt1.endtime }
  - Location: RP_appt4.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ RP_appt1.location }      
  - Additional Info for RP: RP_appt4.description 
    required: False
      
  - note: For **Fifth Appointment**
  - Start Date: RP_appt5.begindate
    datatype: date
    default: |
      ${ RP_appt1.begindate.plus(weeks=8) }
  - End Date: RP_appt5.enddate
    datatype: date
    default: |
      ${ RP_appt1.enddate.plus(weeks=8) }
  - RP Arrival Time: RP_appt5.begintime
    datatype: time
    default: |
      ${ RP_appt1.begintime }
  - RP Pick-up Time: RP_appt5.endtime
    datatype: time
    default: |
      ${ RP_appt1.endtime }
  - Location: RP_appt5.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ RP_appt1.location }      
  - Additional Info for RP: RP_appt5.description 
    required: False
      
  - note: For **Sixth Appointment** 
  - Start Date: RP_appt6.begindate
    datatype: date
    default: |
      ${ RP_appt1.begindate.plus(weeks=10) }
  - End Date: RP_appt6.enddate
    datatype: date
    default: |
      ${ RP_appt1.enddate.plus(weeks=10) }
  - RP Arrival Time: RP_appt6.begintime
    datatype: time
    default: |
      ${ RP_appt1.begintime }
  - RP Pick-up Time: RP_appt6.endtime
    datatype: time
    default: |
      ${ RP_appt1.endtime }
  - Location: RP_appt6.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ RP_appt1.location }      
  - Additional Info for RP: RP_appt6.description 
    required: False
section: Follow Up Appointments
progress: 65
---
question: Follow Up Appointments for NRP
subquestion: |
  Please ensure the below appointmnet details are correct. 
fields:
  - note: For **Second Appointment** 
  - Start Date: NRP_appt2.begindate
    datatype: date
    default: |
      ${ NRP_appt1.begindate.plus(weeks=2) }
  - End Date: NRP_appt2.enddate
    datatype: date
    default: |
      ${ NRP_appt1.enddate.plus(weeks=2) }
  - NRP Arrival Time: NRP_appt2.begintime
    datatype: time
    default: |
      ${ NRP_appt1.begintime }
  - NRP Departure Time: NRP_appt2.endtime
    datatype: time
    default: |
      ${ NRP_appt1.endtime }
  - Location: NRP_appt2.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ NRP_appt1.location }      
  - Additional Info for NRP: NRP_appt2.description
    required: False
      
  - note: For **Third Appointment** 
  - Start Date: NRP_appt3.begindate
    datatype: date
    default: |
      ${ NRP_appt1.begindate.plus(weeks=4) }
  - End Date: NRP_appt3.enddate
    datatype: date
    default: |
      ${ NRP_appt1.enddate.plus(weeks=4) }
  - NRP Arrival Time: NRP_appt3.begintime
    datatype: time
    default: |
      ${ NRP_appt1.begintime }
  - NRP Departure Time: NRP_appt3.endtime
    datatype: time
    default: |
      ${ NRP_appt1.endtime }
  - Location: NRP_appt3.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ NRP_appt1.location }      
  - Additional Info for NRP: NRP_appt3.description
    required: False
      
  - note: For **Fourth Appointment** 
  - Start Date: NRP_appt4.begindate
    datatype: date
    default: |
      ${ NRP_appt1.begindate.plus(weeks=6) }
  - End Date: NRP_appt4.enddate
    datatype: date
    default: |
      ${ NRP_appt1.enddate.plus(weeks=6) }
  - NRP Arrival Time: NRP_appt4.begintime
    datatype: time
    default: |
      ${ NRP_appt1.begintime }
  - NRP Departure Time: NRP_appt4.endtime
    datatype: time
    default: |
      ${ NRP_appt1.endtime }
  - Location: NRP_appt4.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ NRP_appt1.location }      
  - Additional Info for NRP: NRP_appt4.description
    required: False
      
  - note: For **Fifth Appointment**
  - Start Date: NRP_appt5.begindate
    datatype: date
    default: |
      ${ NRP_appt1.begindate.plus(weeks=8) }
  - End Date: NRP_appt5.enddate
    datatype: date
    default: |
      ${ NRP_appt1.enddate.plus(weeks=8) }
  - NRP Arrival Time: NRP_appt5.begintime
    datatype: time
    default: |
      ${ NRP_appt1.begintime }
  - NRP Departure Time: NRP_appt5.endtime
    datatype: time
    default: |
      ${ NRP_appt1.endtime }
  - Location: NRP_appt5.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ NRP_appt1.location }      
  - Additional Info for NRP: NRP_appt5.description
    required: False
      
  - note: For **Sixth Appointment** 
  - Start Date: NRP_appt6.begindate
    datatype: date
    default: |
      ${ NRP_appt1.begindate.plus(weeks=10) }
  - End Date: NRP_appt6.enddate
    datatype: date
    default: |
      ${ NRP_appt1.enddate.plus(weeks=10) }
  - NRP Arrival Time: NRP_appt6.begintime
    datatype: time
    default: |
      ${ NRP_appt1.begintime }
  - NRP Departure Time: NRP_appt6.endtime
    datatype: time
    default: |
      ${ NRP_appt1.endtime }
  - Location: NRP_appt6.location
    datatype: dropdown
    choices: 
    - Mt Barker
    - Noarlunga
    default: |
      ${ NRP_appt1.location }      
  - Additional Info for NRP: NRP_appt6.description
    required: False
progress: 70
---
code: |
  ACdisplay_Confirm_follow_appt = True
  force_ask('Confirm_follow_appt')
---
# Confirm the client's appointments dates
## Insert a table summarising the appointment type. 
event: Confirm_follow_appt
question: Confirm Follow Up Appointments
subquestion: |
 
  **For RP**
  
  Appointments|Date|Arrival Time|Visit Commencing Time|Pick-up Time
  ---|---|---|---|---
  -|${ format_date(RP_appt1.begindate, format='EEEE')}|-|-|-
  1st|${ format_date(RP_appt1.begindate, format='dd/MM/yyyy')}|${ format_time(RP_appt1.begintime, format='h:mm a')}|${ format_time(NRP_appt1.begintime, format='h:mm a')}|${ format_time(RP_appt1.endtime, format='h:mm a')}
  2nd|${ format_date(RP_appt2.begindate, format='dd/MM/yyyy')}|${ format_time(RP_appt2.begintime, format='h:mm a')}|${ format_time(NRP_appt2.begintime, format='h:mm a')}|${ format_time(RP_appt2.endtime, format='h:mm a')}
  3rd|${ format_date(RP_appt3.begindate, format='dd/MM/yyyy')}|${ format_time(RP_appt3.begintime, format='h:mm a')}|${ format_time(NRP_appt3.begintime, format='h:mm a')}|${ format_time(RP_appt3.endtime, format='h:mm a')}
  4th|${ format_date(RP_appt4.begindate, format='dd/MM/yyyy')}|${ format_time(RP_appt4.begintime, format='h:mm a')}|${ format_time(NRP_appt4.begintime, format='h:mm a')}|${ format_time(RP_appt4.endtime, format='h:mm a')}
  5th|${ format_date(RP_appt5.begindate, format='dd/MM/yyyy')}|${ format_time(RP_appt5.begintime, format='h:mm a')}|${ format_time(NRP_appt5.begintime, format='h:mm a')}|${ format_time(RP_appt5.endtime, format='h:mm a')}
  6th|${ format_date(RP_appt6.begindate, format='dd/MM/yyyy')}|${ format_time(RP_appt6.begintime, format='h:mm a')}|${ format_time(NRP_appt6.begintime, format='h:mm a')}|${ format_time(RP_appt6.endtime, format='h:mm a')}
  
  
  **For NRP**
  
  Appointments|Date|Arrival Time|Visit Ending Time|Departure Time
  ---|---|---|---|---
  -|${ format_date(NRP_appt1.begindate, format='EEEE')}|-|-|-
  1st|${ format_date(NRP_appt1.begindate, format='dd/MM/yyyy')}|${ format_time(NRP_appt1.begintime, format='h:mm a')}|${ format_time(RP_appt1.endtime, format='h:mm a')}|${ format_time(NRP_appt1.endtime, format='h:mm a')}
  2nd|${ format_date(NRP_appt2.begindate, format='dd/MM/yyyy')}|${ format_time(NRP_appt2.begintime, format='h:mm a')}|${ format_time(RP_appt2.endtime, format='h:mm a')}|${ format_time(NRP_appt1.endtime, format='h:mm a')}
  3rd|${ format_date(NRP_appt3.begindate, format='dd/MM/yyyy')}|${ format_time(NRP_appt3.begintime, format='h:mm a')}|${ format_time(RP_appt3.endtime, format='h:mm a')}|${ format_time(NRP_appt1.endtime, format='h:mm a')}
  4th|${ format_date(NRP_appt4.begindate, format='dd/MM/yyyy')}|${ format_time(NRP_appt4.begintime, format='h:mm a')}|${ format_time(RP_appt4.endtime, format='h:mm a')}|${ format_time(NRP_appt1.endtime, format='h:mm a')}
  5th|${ format_date(NRP_appt5.begindate, format='dd/MM/yyyy')}|${ format_time(NRP_appt5.begintime, format='h:mm a')}|${ format_time(RP_appt5.endtime, format='h:mm a')}|${ format_time(NRP_appt1.endtime, format='h:mm a')}
  6th|${ format_date(NRP_appt6.begindate, format='dd/MM/yyyy')}|${ format_time(NRP_appt6.begintime, format='h:mm a')}|${ format_time(RP_appt6.endtime, format='h:mm a')}|${ format_time(NRP_appt1.endtime, format='h:mm a')}
  
  Please confirm the above appointment details.

buttons: 
  Confirm: continue
back button: True
back button label: |
  Edit Appointments Dates/Time
progress: 75
---
code: |
  ACdisplay_email_reminders = True
  force_ask('email_reminders')
---
event: email_reminders
question: Sending Email Reminders
subquestion: |
  
  Case Number|${RP.case}
  ---|---
  RP Full Name|${RP.name.first} ${RP.name.last}
  RP Email|${RP.email}
  NRP Full Name|${NRP.name.first} ${NRP.name.last}
  NRP Email|${NRP.email}

  Please confirm the **email address** before you **send** PDF instructions and reminders. 

buttons:
  Send: continue
back button: True
back button label: |
  Check Appointments Dates/Time
section: Email Reminders
progress: 80
---
attachment: 
  name: PDF for RP - ${RP.title}.${RP.name.last}
  variable name: RP_Noarlunga_location
  filename: AnglicareSA - Appt Details for ${RP.title}.${RP.name.last}
  docx template file: PDF_Noarlunga_location_RP.docx
---
template: RP_Noarlunga_email
subject: |
  AnglicareSA: Appointments Details for ${RP.name.first} ${RP.name.last} 
content: |
  Dear. ${RP.title}. ${RP.name.last},
  
  Please find the attached PDF file for your upcoming appointments with Anglicare SA Child Contact Service.
  
  **Anglicare Child Contact Service centre**
  
  Noarlunga Community Children’s Centre, Alexander Kelly Drive, Noarlunga Centre
  
  **Ph:** 0428 132 755 (weekends only)
  
  Thank you. 
  
  Sincerely, 
  
  AnglicareSA
---
attachment:
  name: PDF for NRP - ${NRP.title}.${NRP.name.last}
  variable name: NRP_Noarlunga_location
  filenmae: AnglicareSA - Appt Details for ${NRP.title}.${NRP.name.last}
  docx template file: PDF_Noarlunga_location_NRP.docx
---
template: NRP_Noarlunga_email
subject: |
  AnglicareSA: Appointments Details for ${NRP.name.first} ${NRP.name.last} 
content: |
  Dear. ${NRP.title}. ${NRP.name.last},
  
  Please find the attached PDF file for your upcoming appointments with Anglicare SA Child Contact Service.
  
  **Anglicare Child Contact Service centre**
  
  Noarlunga Community Children’s Centre, Alexander Kelly Drive, Noarlunga Centre
  
  **Ph:** 0428 132 755 (weekends only)
  
  Thank you. 
  
  Sincerely, 
  
  AnglicareSA
---
code: |
  success_sending_emailRPN = send_email(to=RP.email, template=RP_Noarlunga_email, attachments=RP_Noarlunga_location.pdf)
  instructions_to_RP_Noarlunga = True
---
code: |
  success_sending_emailNRPN = send_email(to=NRP.email, template=NRP_Noarlunga_email, attachments=NRP_Noarlunga_location.pdf)
  instructions_to_NRP_Noarlunga = True
---
event: PDF_Noarlunga
question: PDF documents for ${RP.case}
subquestion: |

  Thank you for using appointment reminders system!

  % if success_sending_emailRPN and success_sending_emailNRPN:
  Appointment reminders and PDF instructions for **${RP.case}** are successfully sent to:
  
  Case Number|${RP.case}
  ---|---
  RP Full Name|${RP.name.first} ${RP.name.last}
  RP Email|${RP.email}
  NRP Full Name|${NRP.name.first} ${NRP.name.last}
  NRP Email|${NRP.email}
  
  Please download PDFs below for your reference.
  
  % else:
  Unfortunately, there was a problem occurred while sending reminders. Please try again. 

  % endif

attachment code: |
  [RP_Noarlunga_location, NRP_Noarlunga_location]

buttons:
  - New Case: restart
  - Exit: exit
    url: https://anglicaresa.com.au/?gclid=CjwKCAjws8yUBhA1EiwAi_tpEQ7MtgVdLRuNVg3MLaVwPr6WVv122naLlS5JkVmrANJ51-zq1778mRoCEnAQAvD_BwE
section: PDFs Download
---
attachment: 
  name: PDF for RP - ${RP.title}.${RP.name.last}
  variable name: RP_Mt_Barker_location
  filename: AnglicareSA - Appt Details for ${RP.title}.${RP.name.last}
  docx template file: PDF_Mt_Baker_location_RP.docx
---
template: RP_Mt_Barker_email
subject: |
  AnglicareSA: Appointments Details for ${RP.name.first} ${RP.name.last} 
content: |
  Dear. ${RP.title}. ${RP.name.last},
  
  Please find the attached PDF file for your upcoming appointments with Anglicare SA Child Contact Service.
  
  **Anglicare Child Contact Service centre** 
  
  Family House, 3 Willow Close, Mt Baker 
  
  **Ph:** 0411 743 056 (weekends only)

  Thank you. 
  
  

  Sincerely, 
  
  
  AnglicareSA
---
attachment:
  name: PDF for NRP - ${NRP.title}.${NRP.name.last}
  variable name: NRP_Mt_Barker_location
  filenmae: AnglicareSA - Appt Details for ${NRP.title}.${NRP.name.last}
  docx template file: PDF_Mt_Baker_location_NRP.docx
---
template: NRP_Mt_Barker_email
subject: |
  AnglicareSA: Appointments Details for ${NRP.name.first} ${NRP.name.last} 
content: |
  Dear. ${NRP.title}. ${NRP.name.last},
  
  Please find the attached PDF file for your upcoming appointments with Anglicare SA Child Contact Service.
  
  **Anglicare Child Contact Service centre** 
  
  Family House, 3 Willow Close, Mt Baker 
  
  **Ph:** 0411 743 056 (weekends only)

  Thank you. 
  
  Sincerely, 
  
  
  
  AnglicareSA
---
code: |
  success_sending_emailRPB = send_email(to=RP.email, template=RP_Noarlunga_email, attachments=RP_Mt_Barker_location.pdf)
  instructions_to_RP_Mt_Barker = True
---
code: |
  success_sending_emailNRPB = send_email(to=NRP.email, template=NRP_Mt_Barker_email, attachments=NRP_Mt_Barker_location.pdf)
  instructions_to_NRP_Mt_Barker = True
---
event: PDF_Mt_Barker
question: PDF documents for ${RP.case}
subquestion: |

  Thank you for using appointment reminders system!

  % if success_sending_emailRPB and success_sending_emailNRPB:
  Appointment reminders and PDF instructions for **${RP.case}** are successfully sent to:
  
  Case Number|${RP.case}
  ---|---
  RP Full Name|${RP.name.first} ${RP.name.last}
  RP Email|${RP.email}
  NRP Full Name|${NRP.name.first} ${NRP.name.last}
  NRP Email|${NRP.email}
  
  Please download PDFs below for your reference.
  
  % else:
  Unfortunately, there was a problem occurred while sending reminders. Please try again. 

  % endif

attachment code: |
  [RP_Mt_Barker_location, NRP_Mt_Barker_location]

buttons:
  - New Case: restart
  - Exit: exit
    url: https://anglicaresa.com.au/?gclid=CjwKCAjws8yUBhA1EiwAi_tpEQ7MtgVdLRuNVg3MLaVwPr6WVv122naLlS5JkVmrANJ51-zq1778mRoCEnAQAvD_BwE
section: PDFs Download
progress: 120
---