---
#AnglicareSA App main
metadata:
  title: AnglicareSA 
  short title: |
    Appointments Reminder Emails
  description: |
    Please use this App to send booking reminders to the client's registered email address.
  data format: |
    format_date('dddd, dd MMMM yyyy')
    format_time('hh:mm tt')
##Naviation bar can be inserted here for S2. 
---
objects:
  - user: Individual
  - adverse_party: Individual
  - appointments: DAList.using(object_type=Thing)
---
mandatory: true
question: AnglicareSA Clients Appointment Reminder System
subquestion: |
  Welcome to the AnglicareSA - Clients Appoitnment Reminder System!
  
  Before you initiate the application, make sure that you have:
  - correct information for the client;f
  - correct email address for the client;
  - correct date/time for six appointments.
  
  **Privacy Statement**

  This is where we need to talk about privacy if we are going to warn the staffs or something. 
  
buttons:
  - I accept these terms: continue
  - I do not accept these terms: exit
---
# Client Information: This needs to be discussed with Anglicare officers to double check what exact information should be included in the template.
mandatory: true
question: Client Information 
fields:
  - Case Number: user.case
  - Salutation: user.salutation
    datatype: dropdown
    choices: 
    - Mr
    - Ms
    - Mrs
    - Miss
  - Last Name: user.name.last
  - First Name: user.name.first
  - Date of Birth: user.dob
    datatype: date
  - Relationship to Child: user.relationship
    datatype: dropdown
    choices:
    - Mother
    - Father
    - Other
  - Please specify your relationship to the child: ACspecify  
    show if: 
      variable: user.relationship
      is: 'Other'
  - Email: user.email
    datatype: email
  - Mobile phone number: user.phone
    datatype: integer
    minlength: 10
    maxlength: 10
---
# Confirm the client's detail in this page (except the email address)
## Table - Is there any way I can code to show specific relationship only f the staff choose 'other' for the relationship?
### Is there code to show back button only if the stuff press 'no' button?
mandatory: true
question: Confirm Client Information
subquestion: |
  **Client's information**
 
  Question|Answer
  ---|---
  Case Number|${user.case}
  Last Name|${user.name.last}
  First Name|${user.name.first}
  Date of Birth|${user.dob}
  Relationship to Child|${user.relationship}{% if user.relationship == 'Other'%}{{ ACspecify }}{% else %}{% endif %}
  
  **Client's Contact Details**
  
  Question|Answer
  ---|---
  Email|${user.email}
  Mobile Phone|${user.phone}
  
  **Do you confirm that the above client's information is correct?**
buttons: 
  yes: continue
  no: |
back button: true 
back button label: |
  Edit Client's Information
---
mandatory: true
question: Appointment Location
subquestion: |
  Please confirm the location of the appointments. 
fields: 
  - Address: AClocation
    datatype: dropdown
    choices:
    - Location 1
    - Location 2
    - Location 3
    - Location 4
    - Location 5
    - Location 6
    - Other
  - Then, what is the address for the location?: AClocationelse
    show if: 
      variable: AClocation
      is: 'Other'
---
## Double check the date and time fields
mandatory: true
question: Appointments Dates
subquestion: |
  Please select appointments dates.

  **First Appointment**
fields:
  - Date: ACdate1
    datatype: date
  - Time: ACtime1
    datatype: time
---
mandatory: true
question: Do you confirm the first appointment?
subquestion: |
  First Appointment|Details
  ---|---
  Location|${AClocation}
  Date|${ACdate1}
  Time|${ACtime1}
  
buttons: 
  yes: continue
  no: |
back button: True
back button label: |
  Edit First Appointment Date/Time  
---
mandatory: true
question: Follow Up Appointments
subquestion: |
  Please confirm the dates and time of follow up appointments.
fields:
  - note: For **Second Appointment** 
  - Date: ACdate2
    datatype: date
    default: |
      ${ ACdate1.plus(weeks=2) }
  - Time: ACtime2
    datatype: time
    default: |
      ${ ACtime1 }
      
  - note: For **Third Appointment** 
  - Date: ACdate3
    datatype: date
    default: |
      ${ ACdate1.plus(weeks=4) }
  - Time: ACtime3
    datatype: time
    default: |
      ${ ACtime1 }
      
  - note: For **Fourth Appointment** 
  - Date: ACdate4
    datatype: date
    default: |
      ${ ACdate1.plus(weeks=6) }
  - Time: ACtime4
    datatype: time
    default: |
      ${ ACtime1 }
      
  - note: For **Fifth Appointment**
  - Date: ACdate5
    datatype: date
    default: |
      ${ ACdate1.plus(weeks=8) }
  - Time: ACtime5
    datatype: time
    default: |
      ${ ACtime1 }
      
  - note: For **Sixth Appointment** 
  - Date: ACdate6
    datatype: date
    default: |
      ${ ACdate1.plus(weeks=10) }
  - Time: ACtime6
    datatype: time
    default: |
      ${ ACtime1 }
---
# Confirm the client's appointments dates
## Insert a table summarising the appointment type. 
mandatory: true
question: Confirming client's appointments. 
subquestion: |
 
  Please confirm the details of the appointments are correct.
  
  Appointments|Date/Time
  ---|---
  1st Appointment|${ACdate1} at ${ACtime1}
  2nd Appointment|${ACdate2} at ${ACtime2}
  3rd Appointment|${ACdate3} at ${ACtime3}
  4th Appointment|${ACdate4} at ${ACtime4}
  5th Appointment|${ACdate5} at ${ACtime5}
  6th Appointment|${ACdate6} at ${ACtime6}
  
  Do you confirm that the above client's information is correct?

buttons: 
  yes: continue
  no: |
back button: True
back button label: |
  Edit Appointments Dates/Time
---
# Here we need to add Email reminder sent confirmation message
## Download PDF file for the reminder document
### Somehow the attachment function is not working
mandatory: true
question: Document is now ready for your reference
subquestion: |
  
  Please find the details of the client information you have entered and booking details 

  Please find summary document for your reference. 

attachements: 
  - name: what is it?
    filename: filename
    docx template file: ACSA1_template.docx
    valid formats:
    - pdf

buttons: 
  - Confirm the document and ready to send: continue
  - No: restart
---
# This is where we need to add the email reminders function which we are not sure yet.
mandatory: true
question: How do we do it? 
--- 